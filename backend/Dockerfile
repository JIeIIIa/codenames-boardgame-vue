FROM openjdk:8-jre-alpine
ARG JDBC_DATABASE_URL=jdbc:postgresql://127.0.0.1:5432/codenames
ARG JDBC_DATABASE_USERNAME=postgres
ARG JDBC_DATABASE_PASSWORD=password

ENV PORT 8088
ENV JDBC_DATABASE_URL=$JDBC_DATABASE_URL
ENV JDBC_DATABASE_USERNAME=$JDBC_DATABASE_USERNAME
ENV JDBC_DATABASE_PASSWORD=$JDBC_DATABASE_PASSWORD

COPY ./target/codenames-boardgame-backend-0.0.1-SNAPSHOT.jar /app/app.jar
ENTRYPOINT sh -c 'java \
                    -DJDBC_DATABASE_URL=$JDBC_DATABASE_URL \
                    -DJDBC_DATABASE_USERNAME=$JDBC_DATABASE_USERNAME \
                    -DJDBC_DATABASE_PASSWORD=$JDBC_DATABASE_PASSWORD \
                    -jar /app/app.jar'